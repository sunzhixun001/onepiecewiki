<view class="wrap">
  <navbar 
    title="{{title}}"
    back="{{false}}"
    background="#D9312B"
    color="#FFFFFF"
  >
    <view slot="left">
      <text class="fa fa-bars" bindtap="switchchapters"/>
      <text class="fa fa-bars" bindtap="switchchapters"/>
    </view>
  </navbar>
  
  <chapters 
    datasource="{{chapterlist}}" 
    bind:itemtap="onChapterTap"
    wx:if="{{visiblechapter}}"
  />
  <ad
    wx:if="{{showAd}}"
    bind:close="handleAdClose"
    items="{{ads}}"
  />
  <view class='container'>
    <view class='main timeline listPage'>
      <view class='bgGray borderBottom tabListArea'>
        <view class='swiper-container headerTabList'>
          <view class='swiper-wrapper'>
            <view 
              class="swiper-slide item {{index === currentIndex ? 'on':''}}" 
              wx:for="{{tabs}}" 
              wx:key="index"
              data-index="{{index}}"
              bindtap="bindTabChange"
            >
              <text>{{item}}</text>
            </view>
          </view>
        </view>
      </view>
      <view class='wrap'>
          <view class="area">
            <view class='listArea'>
              <swiper 
                class="swiper"
                current="{{currentIndex}}"
                circular
                bindchange="swiperChange"
              >
                <swiper-item>
                  <timeline-list 
                    datasource="{{immemorialevents.data}}"
                    total="{{immemorialevents.total}}"
                  />
                </swiper-item>
                <swiper-item>
                  <timeline-list 
                    datasource="{{bcevents.data}}"
                    total="{{bcevents.total}}"
                    bind:scrolltolower="bceventsscrolltolower"
                    id="bcevents"
                  />
                </swiper-item>
                <swiper-item>
                  <timeline-list 
                    datasource="{{standardevents.data}}"
                    total="{{standardevents.total}}"
                    bind:scrolltolower="standardeventsscrolltolower"
                    id="standardevents"
                  />
                </swiper-item>
                <swiper-item>
                  <timeline-list 
                    datasource="{{newworldevents.data}}"
                    total="{{newworldevents.total}}"
                    bind:scrolltolower="newworldeventsscrolltolower"
                    id="newworldevents"
                  />
                </swiper-item>
              </swiper>
            </view>
          </view>
        </view>
    </view>
    <mask wx:if="{{visiblechapter || showMask}}" bind:close="closechapter"/>
  </view>
</view>