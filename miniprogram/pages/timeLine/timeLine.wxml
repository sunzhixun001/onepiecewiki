<view class="wrap">
  <navbar 
    title="{{title}}"
    back="{{false}}"
    background="#D9312B"
    color="#FFFFFF"
  >
    <view slot="left">
      <text class="fa fa-cog" style="margin-right: 10px" bindtap="visibleMenu"/>
      <text class="fa fa-bars" bindtap="switchchapters"/>
    </view>
  </navbar>
  
  <chapters 
    datasource="{{chapterlist}}" 
    bind:itemtap="onChapterTap"
    wx:if="{{visiblechapter}}"
  />
  <ad
    wx:if="{{showAd}}"
    bind:close="handleAdClose"
    items="{{ads}}"
  />
  <view class='container'>
    <view class='main timeline listPage'>
      <view class="rule">
        <view class='axis'>
          <view class='box'>
            <view class='ages'>
              <view class='age'>太古</view>
              <view class='age'>0</view>
              <view class='age'>1522</view>
              <view class='age'>1524</view>
            </view>
            <view class='straw'>
              <image class='image' src='../../images/wiki.png' />
            </view>
          </view>
        </view>
      </view>
      <view class='content'>
        <timeline-list 
          datasource="{{timelineList}}"
          bind:agechange="agechange"
        />
      </view>
      <view class='bgGray borderBottom tabListArea' wx:if="{{false}}">
        <view class='swiper-container headerTabList'>
          <view class='swiper-wrapper'>
            <view 
              class="swiper-slide item {{index === currentIndex ? 'on':''}}" 
              wx:for="{{tabs}}" 
              wx:key="index"
              data-index="{{index}}"
              bindtap="bindTabChange"
            >
              <text>{{item}}</text>
            </view>
          </view>
        </view>
      </view>
      <view class='wrap' wx:if="{{false}}">
        <view class="area">
          <view class='listArea'>
            <swiper 
              class="swiper"
              current="{{currentIndex}}"
              circular
              bindchange="swiperChange"
            >
              <swiper-item>
                <timeline-list 
                  datasource="{{immemorialevents.data}}"
                  total="{{immemorialevents.total}}"
                />
              </swiper-item>
              <swiper-item>
                <timeline-list 
                  datasource="{{bcevents.data}}"
                  total="{{bcevents.total}}"
                  bind:scrolltolower="bceventsscrolltolower"
                  id="bcevents"
                />
              </swiper-item>
              <swiper-item>
                <timeline-list 
                  datasource="{{standardevents.data}}"
                  total="{{standardevents.total}}"
                  bind:scrolltolower="standardeventsscrolltolower"
                  id="standardevents"
                />
              </swiper-item>
              <swiper-item>
                <timeline-list 
                  datasource="{{newworldevents.data}}"
                  total="{{newworldevents.total}}"
                  bind:scrolltolower="newworldeventsscrolltolower"
                  id="newworldevents"
                />
              </swiper-item>
            </swiper>
          </view>
        </view>
      </view>
    </view>
    <mask wx:if="{{visiblechapter || showMask}}" bind:close="closechapter"/>
  </view>
</view>